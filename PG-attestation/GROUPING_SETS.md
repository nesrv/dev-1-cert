
## üîπ 1. `GROUPING SETS` ‚Äî –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å **–Ω–∞–±–æ—Ä—ã –≥—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫**, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å.

### –ü—Ä–∏–º–µ—Ä:

```sql
SELECT region, employee, SUM(amount)
FROM sales
GROUP BY GROUPING SETS (
  (region, employee),  -- –ø–æ —Ä–µ–≥–∏–æ–Ω—É –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É
  (region),            -- —Ç–æ–ª—å–∫–æ –ø–æ —Ä–µ–≥–∏–æ–Ω—É
  ()                   -- –æ–±—â–∞—è —Å—É–º–º–∞ (–≤—Å–µ–≥–æ)
);
```

üü¢ –ê–Ω–∞–ª–æ–≥ `UNION ALL` —Ç—Ä–µ—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö `GROUP BY`.

---

## üîπ 2. `ROLLUP` ‚Äî –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è

–°–æ–∑–¥–∞–µ—Ç **–∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ø–æ —É—Ä–æ–≤–Ω—è–º –∏–µ—Ä–∞—Ä—Ö–∏–∏**: –æ—Ç –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∫ –æ–±–æ–±—â–µ–Ω–Ω—ã–º.

### –ü—Ä–∏–º–µ—Ä:

```sql
SELECT region, employee, SUM(amount)
FROM sales
GROUP BY ROLLUP(region, employee);
```

üîπ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

* –°—É–º–º—É –ø–æ –∫–∞–∂–¥–æ–º—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É –≤ —Ä–µ–≥–∏–æ–Ω–µ.
* –°—É–º–º—É –ø–æ —Ä–µ–≥–∏–æ–Ω—É.
* –û–±—â—É—é —Å—É–º–º—É.

üìå –≠—Ç–æ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç:

```sql
GROUPING SETS (
  (region, employee),
  (region),
  ()
)
```

---

## üîπ 3. `CUBE` ‚Äî –ü–æ–ª–Ω–∞—è –º–Ω–æ–≥–æ–º–µ—Ä–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è

–í—ã—á–∏—Å–ª—è–µ—Ç **–≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏** –≥—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫ –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø–æ–ª—è–º.

### –ü—Ä–∏–º–µ—Ä:

```sql
SELECT region, employee, SUM(amount)
FROM sales
GROUP BY CUBE(region, employee);
```

üîπ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

* –°—É–º–º—É –ø–æ –∫–∞–∂–¥–æ–π –ø–∞—Ä–µ (region, employee),
* –°—É–º–º—É –ø–æ –∫–∞–∂–¥–æ–º—É `region` (–≤—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏),
* –°—É–º–º—É –ø–æ –∫–∞–∂–¥–æ–º—É `employee` (–≤—Å–µ —Ä–µ–≥–∏–æ–Ω—ã),
* –û–±—â—É—é —Å—É–º–º—É (–≤—Å–µ –≤–º–µ—Å—Ç–µ).

üìå –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç:

```sql
GROUPING SETS (
  (region, employee),
  (region),
  (employee),
  ()
)
```

---

## üîπ –ö–∞–∫ –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –æ–±–æ–±—â–µ–Ω–Ω—ã–µ?

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `GROUPING(...)` ‚Äî –æ–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `1`, –µ—Å–ª–∏ –ø–æ–ª–µ **—Å–≤–µ—Ä–Ω—É—Ç–æ (NULL –∏–∑-–∑–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏)**, –∏ `0` –µ—Å–ª–∏ –æ–Ω–æ —Ä–µ–∞–ª—å–Ω–æ –∏–∑ –¥–∞–Ω–Ω—ã—Ö.

### –ü—Ä–∏–º–µ—Ä —Å `ROLLUP`:

```sql
SELECT
  region,
  employee,
  SUM(amount),
  GROUPING(region) AS is_region_total,
  GROUPING(employee) AS is_employee_total
FROM sales
GROUP BY ROLLUP(region, employee);
```

---

## üß† –°—Ä–∞–≤–Ω–µ–Ω–∏–µ:

| –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è     | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                       |
| --------------- | ------------------------------------------------ |
| `GROUPING SETS` | –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—à—å –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫           |
| `ROLLUP`        | –î–µ–ª–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –∏–µ—Ä–∞—Ä—Ö–∏–∏ (—Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ) |
| `CUBE`          | –í—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏                         |

---
