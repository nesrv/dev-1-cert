–í–æ—Ç –∫—Ä–∞—Ç–∫–∞—è **—à–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º –≤ PostgreSQL**:

---

## üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã?

**–¢—Ä–∏–≥–≥–µ—Ä** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `INSERT`, `UPDATE`, `DELETE`) –Ω–∞ —Ç–∞–±–ª–∏—Ü–µ –∏–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏.

---

## üîπ –û–±—â–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏-—Ç—Ä–∏–≥–≥–µ—Ä–∞:

```sql
CREATE OR REPLACE FUNCTION trigger_function_name()
RETURNS trigger AS $$
BEGIN
  -- –õ–æ–≥–∏–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞
  RETURN NEW; -- –∏–ª–∏ RETURN OLD;
END;
$$ LANGUAGE plpgsql;
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∞–º–æ–≥–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞:

```sql
CREATE TRIGGER trigger_name
AFTER | BEFORE | INSTEAD OF
INSERT | UPDATE | DELETE | TRUNCATE
ON table_name
FOR EACH ROW | STATEMENT
WHEN (—É—Å–ª–æ–≤–∏–µ)
EXECUTE FUNCTION trigger_function_name();
```

---

## üîπ –ö–æ–Ω—Ç–µ–∫—Å—Ç—ã –¥–∞–Ω–Ω—ã—Ö

| –ö–æ–Ω—Ç–µ–∫—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ                                                 |
| -------- | -------------------------------------------------------- |
| `NEW`    | –ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ (–¥–æ—Å—Ç—É–ø–Ω–æ –ø—Ä–∏ `INSERT`, `UPDATE`)  |
| `OLD`    | –°—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ (–¥–æ—Å—Ç—É–ø–Ω–æ –ø—Ä–∏ `UPDATE`, `DELETE`) |

---

## üîπ –ü—Ä–∏–º–µ—Ä—ã

### ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```sql
CREATE OR REPLACE FUNCTION log_update()
RETURNS trigger AS $$
BEGIN
  INSERT INTO updates_log(table_name, changed_at)
  VALUES (TG_TABLE_NAME, now());
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER log_update_trigger
AFTER UPDATE ON users
FOR EACH ROW
EXECUTE FUNCTION log_update();
```

---

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π:

```sql
CREATE OR REPLACE FUNCTION check_age()
RETURNS trigger AS $$
BEGIN
  IF NEW.age < 0 THEN
    RAISE EXCEPTION '–í–æ–∑—Ä–∞—Å—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º';
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER age_check
BEFORE INSERT OR UPDATE ON users
FOR EACH ROW
EXECUTE FUNCTION check_age();
```

---

### ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è:

```sql
CREATE OR REPLACE FUNCTION update_timestamp()
RETURNS trigger AS $$
BEGIN
  NEW.updated_at := now();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER set_updated_at
BEFORE UPDATE ON articles
FOR EACH ROW
EXECUTE FUNCTION update_timestamp();
```

---

## üîπ –£–¥–∞–ª–µ–Ω–∏–µ

```sql
DROP TRIGGER trigger_name ON table_name;
DROP FUNCTION trigger_function_name();
```



### –¢—Ä–∏–≥–≥–µ—Ä—ã –≤ PostgreSQL

**–¢—Ä–∏–≥–≥–µ—Ä—ã** –≤ PostgreSQL ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç –∑–∞–¥–∞–Ω–Ω—ã–π –∫–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ—É–Ω–∫—Ü–∏—é) –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –Ω–∞ —Ç–∞–±–ª–∏—Ü–µ –∏–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏. –¢—Ä–∏–≥–≥–µ—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ –∏–ª–∏ –ø–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `INSERT`, `UPDATE`, `DELETE`), –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ —Å—Ç—Ä–æ–∫–∞–º –∏–ª–∏ —Ü–µ–ª—ã–º —Ç–∞–±–ª–∏—Ü–∞–º.

–¢—Ä–∏–≥–≥–µ—Ä—ã —è–≤–ª—è—é—Ç—Å—è –º–æ—â–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á, —Ç–∞–∫–∏—Ö –∫–∞–∫ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

---

### 1. **–¢–∏–ø—ã —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤**

–¢—Ä–∏–≥–≥–µ—Ä—ã –≤ PostgreSQL –º–æ–∂–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º:

#### **1.1. –í–∞—Ä–∏–∞–Ω—Ç—ã —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤:**

–¢—Ä–∏–≥–≥–µ—Ä—ã –º–æ–≥—É—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å:

* **–î–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è (BEFORE)**: —Ç—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –æ–ø–µ—Ä–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `INSERT`, `UPDATE`, `DELETE`) –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é.
* **–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è (AFTER)**: —Ç—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
* **–ü—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç (INSTEAD OF)**: —Ç—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–º–µ—Å—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –±—ã–ª–∞ –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞. –û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏.

–ü—Ä–∏–º–µ—Ä:

* **BEFORE INSERT** ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü—É.
* **AFTER UPDATE** ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ.

#### **1.2. –í–∞—Ä–∏–∞–Ω—Ç—ã —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–æ–∫ –∏–ª–∏ —Ç–∞–±–ª–∏—Ü:**

* **FOR EACH ROW** ‚Äî —Ç—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –∑–∞—Ç—Ä–æ–Ω—É—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–µ–π.
* **FOR EACH STATEMENT** ‚Äî —Ç—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –≤—Å–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã—Ö —Å—Ç—Ä–æ–∫.

---

### 2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞**

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ –≤ PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ `CREATE TRIGGER`. –°–Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞.

#### –ü—Ä–∏–º–µ—Ä 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞

```sql
CREATE OR REPLACE FUNCTION log_employee_update() 
RETURNS TRIGGER AS $$
BEGIN
    INSERT INTO employee_audit (emp_id, action, action_time)
    VALUES (NEW.id, 'UPDATE', NOW());
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;
```

–ó–¥–µ—Å—å:

* –§—É–Ω–∫—Ü–∏—è `log_employee_update` –≤—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü—É `employee_audit` –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `employees`.

#### –ü—Ä–∏–º–µ—Ä 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞

```sql
CREATE TRIGGER employee_update_trigger
AFTER UPDATE ON employees
FOR EACH ROW
EXECUTE FUNCTION log_employee_update();
```

–ó–¥–µ—Å—å:

* –¢—Ä–∏–≥–≥–µ—Ä `employee_update_trigger` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ `employees`.
* –î–ª—è –∫–∞–∂–¥–æ–π –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `log_employee_update`.

---

### 3. **–£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞**

–î–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ –≤ PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ `DROP TRIGGER`.

–ü—Ä–∏–º–µ—Ä:

```sql
DROP TRIGGER IF EXISTS employee_update_trigger ON employees;
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —É–¥–∞–ª—è–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä `employee_update_trigger` —Å —Ç–∞–±–ª–∏—Ü—ã `employees`.

---

### 4. **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤**

–í PostgreSQL –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –Ω–∞ –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É.

#### **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤**

–î–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ `DISABLE TRIGGER`. –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –æ—Ç–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã.

–ü—Ä–∏–º–µ—Ä:

```sql
DISABLE TRIGGER ALL ON employees;
```

* –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –æ—Ç–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –Ω–∞ —Ç–∞–±–ª–∏—Ü–µ `employees`.

–ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –æ—Ç–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Ç—Ä–∏–≥–≥–µ—Ä:

```sql
DISABLE TRIGGER employee_update_trigger ON employees;
```

#### **–í–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤**

–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ `ENABLE TRIGGER`.

–ü—Ä–∏–º–µ—Ä:

```sql
ENABLE TRIGGER ALL ON employees;
```

* –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –Ω–∞ —Ç–∞–±–ª–∏—Ü–µ `employees`.

–ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –≤–∫–ª—é—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç—Ä–∏–≥–≥–µ—Ä:

```sql
ENABLE TRIGGER employee_update_trigger ON employees;
```

---

### 5. **–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–∏–≥–≥–µ—Ä–∞—Ö**

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–∏–≥–≥–µ—Ä–∞—Ö –≤ PostgreSQL –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –∏ —Ñ—É–Ω–∫—Ü–∏–π.

#### **–ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**

```sql
SELECT tgname, tgrelid::regclass, tgtype, tgenabled, tgargs
FROM pg_trigger
WHERE NOT tgisinternal;
```

–ó–¥–µ—Å—å:

* `tgname` ‚Äî –∏–º—è —Ç—Ä–∏–≥–≥–µ—Ä–∞.
* `tgrelid::regclass` ‚Äî –∏–º—è —Ç–∞–±–ª–∏—Ü—ã, –∫ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–∏–≤—è–∑–∞–Ω —Ç—Ä–∏–≥–≥–µ—Ä.
* `tgtype` ‚Äî —Ç–∏–ø —Ç—Ä–∏–≥–≥–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, BEFORE, AFTER).
* `tgenabled` ‚Äî —Å—Ç–∞—Ç—É—Å —Ç—Ä–∏–≥–≥–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'O' –¥–ª—è –≤–∫–ª—é—á—ë–Ω–Ω–æ–≥–æ, 'D' –¥–ª—è –æ—Ç–∫–ª—é—á—ë–Ω–Ω–æ–≥–æ).
* `tgargs` ‚Äî –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ç—Ä–∏–≥–≥–µ—Ä–∞.

#### **–ü—Ä–∏–º–µ—Ä 2: –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã**

```sql
SELECT tgname, tgtype, tgenabled
FROM pg_trigger
WHERE tgrelid = 'employees'::regclass;
```

–≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ —Ç–∞–±–ª–∏—Ü–µ `employees`.

#### **–ü—Ä–∏–º–µ—Ä 3: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–∏–≥–≥–µ—Ä–∞—Ö —Å –∏—Ö —Ñ—É–Ω–∫—Ü–∏—è–º–∏**

```sql
SELECT tgname, pg_get_triggerdef(oid) AS trigger_definition
FROM pg_trigger
WHERE NOT tgisinternal;
```

–≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –≤—ã–≤–æ–¥–∏—Ç –∏–º–µ–Ω–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ –≤—ã–∑—ã–≤–∞—é—Ç.

---

### 6. **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ –¥–ª—è –∞—É–¥–∏—Ç–∞**

–î–æ–ø—É—Å—Ç–∏–º, –º—ã —Ö–æ—Ç–∏–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ç–∞–±–ª–∏—Ü–µ `employees`). –ú—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –∞—É–¥–∏—Ç–∞.

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∞—É–¥–∏—Ç–∞**:

```sql
CREATE TABLE employee_audit (
    audit_id SERIAL PRIMARY KEY,
    emp_id INT,
    action TEXT,
    action_time TIMESTAMP
);
```

2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞**:

```sql
CREATE OR REPLACE FUNCTION log_employee_update() 
RETURNS TRIGGER AS $$
BEGIN
    INSERT INTO employee_audit (emp_id, action, action_time)
    VALUES (NEW.id, 'UPDATE', NOW());
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;
```

3. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü—É –∞—É–¥–∏—Ç–∞**:

```sql
CREATE TRIGGER employee_update_trigger
AFTER UPDATE ON employees
FOR EACH ROW
EXECUTE FUNCTION log_employee_update();
```

–¢–µ–ø–µ—Ä—å, –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ `employees`, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç—Ç–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –±—É–¥–µ—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `employee_audit`.

---

### –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢—Ä–∏–≥–≥–µ—Ä—ã –≤ PostgreSQL ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á, –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏. –û–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ –∏–ª–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –¥–∞–Ω–Ω—ã—Ö, –∞ —Ç–∞–∫–∂–µ –¥–ª—è —Å—Ç—Ä–æ–∫ –∏–ª–∏ —Ü–µ–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

* **–¢–∏–ø—ã —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤**: `BEFORE`, `AFTER`, `INSTEAD OF` ‚Äî —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è.
* **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤**: —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥ `DISABLE` –∏ `ENABLE`.
* **–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–∏–≥–≥–µ—Ä–∞—Ö**: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ `pg_trigger`.

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–ª–∏ —Ä–∞–∑—ä—è—Å–Ω–µ–Ω–∏–π, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ–±—Ä–∞—â–∞—Ç—å—Å—è!








